<!DOCTYPE html><html lang=en><head><meta charset=utf-8><meta name=description content="The timeless functional programming language"><meta name=theme-color content=#ddd><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta property=og:title content="Cloe programming language"><meta property=og:type content=website><meta property=og:url content=https://cloe-lang.org><meta property=og:image content=https://cloe-lang.org/icon.svg><meta property=og:description content="The timeless functional programming language written in Go which aims to be simple and practical"><meta name=twitter:card content=summary><title>Concept | Cloe programming language</title><link rel=icon href=/icon.svg><link rel=manifest href=/manifest.json><link rel=prerender href=/ ><style>@font-face {
  font-family: TextFont;
          font-display: swap;
  font-style: normal;
  font-weight: 400;
  font-stretch: normal;
  src: url(/3fb8e8a8a76d6fa85dc0.woff2) format("woff2");
}

@font-face {
  font-family: CodeFont;
          font-display: swap;
  font-style: normal;
  font-weight: 400;
  src: url(/fca38838cf93d35e641a.woff2) format("woff2");
}

body{color:#333;font:16px TextFont, sans-serif;height:100vh;margin:0;overflow:hidden;display:flex;justify-content:center}a{color:lightseagreen;text-decoration:none}a:visited{color:lightseagreen}a:hover{text-decoration:underline}a.current{color:coral}a.current:visited{color:coral}blockquote{background:lightgrey;color:dimgrey;padding:0.6em;margin-left:1em;margin-right:1em;border-radius:.2rem}blockquote>*:first-child{margin-top:0}blockquote>*:last-child{margin-bottom:0}pre{border-radius:.2rem;overflow:hidden}code{background:darkslategrey;color:white;font-family:CodeFont, monospace;display:inline-block;padding:0.3em 0.4em;margin:0.15em 0;border-radius:.2rem}pre code{display:block;overflow-x:auto;padding:0.9em 1em;margin:0;border-radius:unset}.toc{padding:1em;overflow-y:auto;scroll-behavior:smooth}@media (max-width: 768px){.toc{padding-bottom:5.5rem;flex:1}.toc.hidden{display:none}}@media (max-width: 768px){.toc{font-size:1.3em;display:flex;flex-direction:column;align-items:center}}.toc ul{list-style-type:none}.content{padding:1em;overflow-y:auto;flex:1;max-width:60em}@media (max-width: 768px){.content{padding-bottom:5.5rem;flex:1}.content.hidden{display:none}}.menu-button{color:white;background:tomato;display:none;justify-content:center;align-items:center;width:4.5rem;height:4.5rem;border-radius:4.5rem;position:fixed;bottom:1rem;right:1rem;box-shadow:0 0.2em 0.3em rgba(0,0,0,0.4);user-select:none}.menu-button.on>svg{transform:rotate(90deg)}.menu-button>svg{height:2.7rem;transition:transform 0.1s}@media (max-width: 768px){.menu-button{display:flex}}.lang-icon{display:flex;flex-shrink:0;justify-content:center}.lang-icon svg{height:4em}.icons{display:flex;flex-shrink:0;justify-content:center;display:flex}.icons svg{height:2em}.icons>*{line-height:0;margin:0.4em}.icons>.twitter{fill:deepskyblue}</style></head><body><div class="toc hidden"><a class=lang-icon href=/ ><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 160 160"><path d="M 0 0 h 160 l -80 80 l 80 80 h -160" fill=teal></path><rect x=30 y=30 width=100 height=100 fill=tomato></rect><rect x=60 y=60 width=40 height=40 fill=teal></rect></svg></a><ul><li><a href=/ >Home</a></li><li><a href=/installation>Installation</a></li><li><a href=/overview>Overview</a><ul><li><a href=/overview/features>Features</a></li><li><a href=/overview/concept class=current>Concept</a></li></ul></li><li><a href=/guide>Guide</a><ul><li><a href=/guide/types>Types</a></li><li><a href=/guide/variables>Variables</a></li><li><a href=/guide/functions>Functions</a></li><li><a href=/guide/modules>Modules</a></li><li><a href=/guide/pattern-matching>Pattern Matching</a></li><li><a href=/guide/error-handling>Error Handling</a></li><li><a href=/guide/clutil-command>clutil Command</a></li></ul></li><li><a href=/api-reference>API Reference</a><ul><li><a href=/api-reference/builtin>builtin</a></li><li><a href=/api-reference/fs>fs</a></li><li><a href=/api-reference/json>json</a></li><li><a href=/api-reference/http>http</a></li><li><a href=/api-reference/os>os</a></li><li><a href=/api-reference/random>random</a></li><li><a href=/api-reference/re>re</a></li></ul></li><li><a href=/examples>Examples</a><ul><li><a href=/examples/data_types>Data Types</a></li><li><a href=/examples/functions>Functions</a></li><li><a href=/examples/recursion>Recursion</a></li><li><a href=/examples/effects>Effects</a></li><li><a href=/examples/errors>Errors</a></li><li><a href=/examples/import>Modules</a></li><li><a href=/examples/math>Math</a></li><li><a href=/examples/comparison>Comparison</a></li><li><a href=/examples/collections>Collections</a></li><li><a href=/examples/parallelism>Parallelism</a></li><li><a href=/examples/io>I/O</a></li><li><a href=/examples/miscellaneous_functions>Misc Functions</a></li><li><a href=/examples/others>Others</a></li><li><a href=/examples/clutil>clutil Command</a></li></ul></li><li><a href=/contribution-guide>Contribution Guide</a></li></ul><div class=icons><a href=https://github.com/cloe-lang/cloe rel=noopener target=_blank><svg class="octicon octicon-mark-github" viewBox="0 0 16 16" version=1.1 aria-hidden=true><path d="M8 0c4.42 0 8 3.58 8 8a8.013 8.013 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38 0-.27.01-1.13.01-2.2 0-.75-.25-1.23-.54-1.48 1.78-.2 3.65-.88 3.65-3.95 0-.88-.31-1.59-.82-2.15.08-.2.36-1.02-.08-2.12 0 0-.67-.22-2.2.82-.64-.18-1.32-.27-2-.27-.68 0-1.36.09-2 .27-1.53-1.03-2.2-.82-2.2-.82-.44 1.1-.16 1.92-.08 2.12-.51.56-.82 1.28-.82 2.15 0 3.06 1.86 3.75 3.64 3.95-.23.2-.44.55-.51 1.07-.46.21-1.61.55-2.33-.66-.15-.24-.6-.83-1.23-.82-.67.01-.27.38.01.53.34.19.73.9.82 1.13.16.45.68 1.31 2.69.94 0 .67.01 1.3.01 1.49 0 .21-.15.45-.55.38A7.995 7.995 0 0 1 0 8c0-4.42 3.58-8 8-8Z"></path></svg> </a><a href="https://twitter.com/intent/tweet?text=Cloe:+the+timeless+functional+programming+language&amp;url=https://cloe-lang.org&amp;hashtags=cloelang" class=twitter rel=noopener target=_blank><svg role=img viewBox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><title>X</title><path d="M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932ZM17.61 20.644h2.039L6.486 3.24H4.298Z"></path></svg></a></div></div><div class=content><h1 id=concept>Concept</h1><p>Abstract concepts lying under Cloe are described here for better understanding of why the language looks so.</p><ul><li><a href=#modeling-programs>Modeling programs</a><ul><li><a href=#stateful-models:-programs-as-objects>Stateful models: programs as objects</a></li><li><a href=#stateless-models:-programs-as-functions>Stateless models: programs as functions</a></li><li><a href=#programs-can-be-lazy>Programs can be lazy</a></li><li><a href=#reactiveness-without-theory>Reactiveness without theory</a></li><li><a href=#inputs-and-effects-are-infinite-in-general>Inputs and effects are infinite in general</a></li><li><a href=#no-data-race>No data race</a></li><li><a href=#parallelism-is-not-free>Parallelism is not free</a></li><li><a href=#observing-results-of-effects>Observing results of effects</a></li><li><a href=#lack-of-nondeterminism>Lack of nondeterminism</a></li></ul></li><li><a href=#analysis>Analysis</a><ul><li><a href=#programs-can-be-lazy>Programs can be lazy</a></li><li><a href=#reactiveness-without-theory>Reactiveness without theory</a></li><li><a href=#inputs-and-effects-are-infinite-in-general>Inputs and effects are infinite in general</a></li><li><a href=#no-data-race>No data race</a></li><li><a href=#parallelism-is-not-free>Parallelism is not free</a></li><li><a href=#observing-results-of-effects>Observing results of effects</a></li><li><a href=#lack-of-nondeterminism>Lack of nondeterminism</a></li></ul></li><li><a href=#caveats>Caveats</a><ul><li><a href=#parallelism-is-not-free>Parallelism is not free</a></li><li><a href=#observing-results-of-effects>Observing results of effects</a></li><li><a href=#lack-of-nondeterminism>Lack of nondeterminism</a></li></ul></li></ul><h2 id=modeling-programs>Modeling programs</h2><p>Hundreds of models and paradigms for computer programming have been proposed over the last decades. Although that is quite controversial, object-oriented and functional programming seem to be 2 representative counterparts in terms of states of programs as they encourage stateful and stateless programming styles respectively.</p><p>This section reveals the stateful and stateless models of programs on which Cloe is based. The explanation about the former comes first as it is more straightforward and even natural for us to think about such models and then the latter which is easier to be fitted to functional programming.</p><h3 id=stateful-models:-programs-as-objects>Stateful models: programs as objects</h3><p>Before starting to think about programs, we must decide what entities to discuss. To begin with, we define the universe which comprises everything existing in the world.</p><pre><code>(universe)
</code></pre><p>Next let’s cut a program out from the universe in order to model it. Then it is clearly visible that what we have to focus on are only the program and the rest but nothing else. The rest includes anything except the program like files, application users, and HTTP servers it may interact with.</p><pre><code>+---------+
| program |
+---------+
</code></pre><p>The next topic is how programs interact with the rest in the universe. For simplicity, we classify the actions done by programs into 2 categories. Ones are <em>inputs</em> which are pure queries for information towards the outside of the program. The others are <em>effects</em> which cause changes to the outer world like printing strings on terminal and sending HTTP responses back.</p><pre><code>   input
     |
+----v----+
| program |
+----v----+
     |
   effect
</code></pre><p>A point to notice is that this is a stateful model and the diagram above illustrates just a single moment of the program’s execution. The program may change its state every time when it receives an input.</p><h3 id=stateless-models:-programs-as-functions>Stateless models: programs as functions</h3><p>It is time to make the previous model stateless so that we can apply functional programming to it. The problem is that the program part is not a pure function because having a state. If that is the case, it works well to take the state out from the program and make a loop which feeds back the state to the program itself. Now the program is just a pure function which takes in inputs and previous states to produce effects and next states.</p><pre><code> input
   |   +----+
+--v---v--+ |
| program | | state
+--v---v--+ |
   |   +----+
 effect
</code></pre><p>Then, the loop which passes states around for every input is expanded over time.</p><pre><code>            input        input        input
              |            |            |
initial  +----v----+  +----v----+  +----v----+
 state --&gt; program &gt;--&gt; program &gt;--&gt; program &gt;-- ...
         +----v----+  +----v----+  +----v----+
              |            |            |
            effect       effect       effect
</code></pre><p>The diagram is simplified by integrating the initial state into the program and collecting up the inputs and effects.</p><pre><code>  inputs
     |
+----v----+
| program |
+----v----+
     |
  effects
</code></pre><p>Finally, we obtain the totally stateless and functional model of programs and this is how programs written in Cloe look. Composing a program is equivalent to doing a pure function which maps its inputs to its effects.</p><h2 id=analysis>Analysis</h2><h3 id=programs-can-be-lazy>Programs can be lazy</h3><p>As inputs are just queries to the outside of programs, they do not have to be evaluated always but only if necessary. What must be guaranteed is only that all effects are run eventually before programs finish.</p><h3 id=reactiveness-without-theory>Reactiveness without theory</h3><p>The model shows us that potential reactiveness inside programs is elicited exactly by starting executing all effects at once. As a result, programs would run in utmost reactiveness within the limits of computational capacity.</p><h3 id=inputs-and-effects-are-infinite-in-general>Inputs and effects are infinite in general</h3><p>If sticking to the model, we need some way to express and handle an infinite number of inputs and effects although available memory is limited. This problem is resolved by lazy evaluation and tail recursion as the former allows function calls to be evaluated on demand and the latter enables infinitely recursive function calls.</p><h3 id=no-data-race>No data race</h3><p>No corrupted data race happens in the model because simultaneous access to the same data occurs only on evaluation of the same function calls demanded by several different expressions and it can be guarded by common exclusive locks.</p><h2 id=caveats>Caveats</h2><h3 id=parallelism-is-not-free>Parallelism is not free</h3><p>Although implicit concurrency can be implemented in quite efficient ways, implicit massive parallelism costs a lot on multi-core CPU machines. For instance, when a myriad of threads are spawned, programs will suffer from cache incoherence and huge memory usage, and end up significant slowdown.</p><p>Therefore, Cloe’s approach is to parallelize every effect for reactiveness but leave anything else sequential so that users have options of whether they run the computation in parallel or not. Meanwhile, it also provides a primitive function to sequentialize evaluation of expressions because it is sometimes necessary for serial execution of effects or fine memory management.</p><h3 id=observing-results-of-effects>Observing results of effects</h3><p>A missing point in the model is how to observe consequences caused by effects. For instance, we may want to check if contents of a file are valid after it has been written.</p><p>For that kinds of situations, Cloe has a function to purify the outcome values of impure function calls in cases where they have to be referred by other expressions for retries, error recovery, etc.</p><h3 id=lack-of-nondeterminism>Lack of nondeterminism</h3><p>As programs are just deterministic functions, the model lacks nondeterminism associated with parallelism which are injected spontaneously in other programming languages. This issue is not investigated thoroughly but an obvious problem caused by it is that we cannot sort data by time at which they become available. Moreover, while such sorting is realized easily by something like concurrent queues in other languages, Cloe cannot adopt it because they are mutable data structures.</p><p>A solution which is implemented and available currently is a built-in function to do such sorting.</p></div><div class=menu-button><svg fill=currentColor class="octicon octicon-three-bars" viewBox="0 0 16 16" version=1.1 aria-hidden=true><path d="M1 2.75A.75.75 0 0 1 1.75 2h12.5a.75.75 0 0 1 0 1.5H1.75A.75.75 0 0 1 1 2.75Zm0 5A.75.75 0 0 1 1.75 7h12.5a.75.75 0 0 1 0 1.5H1.75A.75.75 0 0 1 1 7.75ZM1.75 12h12.5a.75.75 0 0 1 0 1.5H1.75a.75.75 0 0 1 0-1.5Z"></path></svg></div><script async="" src=/index.js></script></body></html>